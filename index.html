<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sopa de Letras de Helados</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #4a4a4a;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 25px;
            margin-top: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        h1 {
            color: #ff6b6b;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .subtitle {
            color: #7c4dff;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        .instructions {
            background-color: #ffecec;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #ff6b6b;
        }
        
        .instructions p {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .word-search {
            flex: 2;
            min-width: 300px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 3px;
            margin-bottom: 15px;
        }
        
        .cell {
            width: 100%;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
        }
        
        .cell.selected {
            background-color: #ffcdd2;
            transform: scale(1.05);
        }
        
        .cell.found {
            background-color: #c8e6c9;
            color: #2e7d32;
        }
        
        .word-list {
            flex: 1;
            min-width: 200px;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
        }
        
        .word-list h3 {
            color: #ff6b6b;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .word-item {
            padding: 8px 12px;
            margin-bottom: 8px;
            background-color: #fff;
            border-radius: 5px;
            display: flex;
            align-items: center;
        }
        
        .word-item.found {
            background-color: #e8f5e9;
            text-decoration: line-through;
            color: #2e7d32;
        }
        
        .word-item::before {
            content: "‚Ä¢";
            margin-right: 8px;
            color: #ff6b6b;
        }
        
        .word-item.found::before {
            content: "‚úì";
            color: #2e7d32;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        button {
            padding: 12px 25px;
            background-color: #ff6b6b;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            background-color: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .message {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            border-radius: 10px;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .success-message {
            background-color: #e8f5e9;
            color: #2e7d32;
            font-size: 1.4rem;
            padding: 20px;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .attempts-info {
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
            color: #7c4dff;
        }
        
        footer {
            margin-top: 30px;
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }
        
        /* Estilos para el modal de notificaci√≥n */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .modal h2 {
            color: #ff6b6b;
            margin-bottom: 20px;
        }
        
        .modal-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        
        .modal-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .whatsapp-btn {
            background-color: #25D366;
            color: white;
        }
        
        .screenshot-btn {
            background-color: #7c4dff;
            color: white;
        }
        
        .close-btn {
            background-color: #f5f5f5;
            color: #333;
            margin-top: 15px;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .modal-options {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üç¶ Sopa de Letras de Helados üç¶</h1>
            <p class="subtitle">Encuentra todas las palabras relacionadas con el delicioso mundo de los helados</p>
        </header>
        
        <div class="instructions">
            <p><strong>Instrucciones:</strong> Encuentra las palabras en la sopa de letras. Haz clic en la primera letra y arrastra hasta la √∫ltima letra para seleccionar una palabra.</p>
            <p><strong>Importante:</strong> Solo tienes un intento. Cuando encuentres todas las palabras, ver√°s un mensaje especial.</p>
        </div>
        
        <div class="game-container">
            <div class="word-search">
                <div id="grid" class="grid"></div>
            </div>
            
            <div class="word-list">
                <h3>Palabras por encontrar</h3>
                <div id="word-dandelion" class="word-item">DANDELION</div>
                <div id="word-domicilio" class="word-item">DOMICILIO</div>
                <div id="word-cremoso" class="word-item">CREMOSO</div>
                <div id="word-helado" class="word-item">HELADO</div>
                <div id="word-sabor" class="word-item">SABOR</div>
                <div id="word-cono" class="word-item">CONO</div>
                <div id="word-frutilla" class="word-item">FRUTILLA</div>
                <div id="word-vainilla" class="word-item">VAINILLA</div>
                <div id="word-chocolate" class="word-item">CHOCOLATE</div>
            </div>
        </div>
        
        <div class="controls">
            <button id="check-button">Comprobar selecci√≥n</button>
            <button id="reset-button">Reiniciar selecci√≥n</button>
        </div>
        
        <div id="message" class="message"></div>
        <div id="attempts-info" class="attempts-info">Intentos restantes: 1</div>
    </div>
    
    <!-- Modal de notificaci√≥n -->
    <div id="notification-modal" class="modal">
        <div class="modal-content">
            <h2>¬°Felicidades! Completaste el puzle</h2>
            <p>Por favor, notifica tu √©xito mediante una de estas opciones:</p>
            <div class="modal-options">
                <button id="whatsapp-btn" class="modal-btn whatsapp-btn">Enviar mensaje por WhatsApp</button>
                <button id="screenshot-btn" class="modal-btn screenshot-btn">Enviar captura de pantalla</button>
                <button id="close-modal-btn" class="modal-btn close-btn">Cerrar</button>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Dise√±ado para amantes de los helados | ¬°Solo un intento por jugador!</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Palabras para buscar (incluyendo las solicitadas)
            const palabras = [
                'DANDELION',
                'DOMICILIO',
                'CREMOSO',
                'HELADO',
                'SABOR',
                'CONO',
                'FRUTILLA',
                'VAINILLA',
                'CHOCOLATE'
            ];
            
            // Configuraci√≥n
            const gridSize = 15;
            let seleccionando = false;
            let seleccionInicio = null;
            let celdasSeleccionadas = [];
            let palabrasEncontradas = [];
            let sopa = [];
            let intentoRealizado = false;
            let juegoCompletado = false;
            
            // Referencias DOM
            const gridElement = document.getElementById('grid');
            const messageElement = document.getElementById('message');
            const attemptsInfoElement = document.getElementById('attempts-info');
            const checkButton = document.getElementById('check-button');
            const resetButton = document.getElementById('reset-button');
            const modal = document.getElementById('notification-modal');
            const whatsappBtn = document.getElementById('whatsapp-btn');
            const screenshotBtn = document.getElementById('screenshot-btn');
            const closeModalBtn = document.getElementById('close-modal-btn');
            
            // Inicializar la sopa de letras
            function inicializarSopa() {
                // Crear una matriz vac√≠a
                sopa = Array(gridSize).fill().map(() => Array(gridSize).fill(''));
                
                // Colocar las palabras en la sopa
                palabras.forEach(palabra => {
                    colocarPalabra(palabra);
                });
                
                // Rellenar espacios vac√≠os con letras aleatorias
                for (let i = 0; i < gridSize; i++) {
                    for (let j = 0; j < gridSize; j++) {
                        if (sopa[i][j] === '') {
                            sopa[i][j] = generarLetraAleatoria();
                        }
                    }
                }
                
                // Renderizar la sopa
                renderizarSopa();
            }
            
            // Colocar una palabra en la sopa en una direcci√≥n aleatoria
            function colocarPalabra(palabra) {
                const direcciones = [
                    {dx: 1, dy: 0},   // Horizontal
                    {dx: 0, dy: 1},   // Vertical
                    {dx: 1, dy: 1},   // Diagonal
                    {dx: 1, dy: -1}   // Diagonal inversa
                ];
                
                let colocada = false;
                let intentos = 0;
                
                while (!colocada && intentos < 50) {
                    intentos++;
                    
                    // Elegir direcci√≥n aleatoria
                    const dir = direcciones[Math.floor(Math.random() * direcciones.length)];
                    
                    // Posici√≥n inicial aleatoria
                    let x = Math.floor(Math.random() * gridSize);
                    let y = Math.floor(Math.random() * gridSize);
                    
                    // Verificar si la palabra cabe
                    const finX = x + dir.dx * (palabra.length - 1);
                    const finY = y + dir.dy * (palabra.length - 1);
                    
                    if (finX < 0 || finX >= gridSize || finY < 0 || finY >= gridSize) {
                        continue;
                    }
                    
                    // Verificar que no haya conflictos
                    let conflicto = false;
                    for (let i = 0; i < palabra.length; i++) {
                        const nuevaX = x + i * dir.dx;
                        const nuevaY = y + i * dir.dy;
                        
                        if (sopa[nuevaY][nuevaX] !== '' && sopa[nuevaY][nuevaX] !== palabra[i]) {
                            conflicto = true;
                            break;
                        }
                    }
                    
                    if (conflicto) continue;
                    
                    // Colocar la palabra
                    for (let i = 0; i < palabra.length; i++) {
                        const nuevaX = x + i * dir.dx;
                        const nuevaY = y + i * dir.dy;
                        sopa[nuevaY][nuevaX] = palabra[i];
                    }
                    
                    colocada = true;
                }
            }
            
            // Generar una letra aleatoria (may√∫scula)
            function generarLetraAleatoria() {
                return String.fromCharCode(65 + Math.floor(Math.random() * 26));
            }
            
            // Renderizar la sopa de letras en el DOM
            function renderizarSopa() {
                gridElement.innerHTML = '';
                
                for (let i = 0; i < gridSize; i++) {
                    for (let j = 0; j < gridSize; j++) {
                        const celda = document.createElement('div');
                        celda.className = 'cell';
                        celda.textContent = sopa[i][j];
                        celda.dataset.fila = i;
                        celda.dataset.columna = j;
                        
                        // Eventos para selecci√≥n
                        celda.addEventListener('mousedown', iniciarSeleccion);
                        celda.addEventListener('mouseenter', continuarSeleccion);
                        celda.addEventListener('mouseup', finalizarSeleccion);
                        
                        gridElement.appendChild(celda);
                    }
                }
            }
            
            // Manejar inicio de selecci√≥n
            function iniciarSeleccion(e) {
                if (intentoRealizado || juegoCompletado) return;
                
                seleccionando = true;
                seleccionInicio = {
                    fila: parseInt(e.target.dataset.fila),
                    columna: parseInt(e.target.dataset.columna)
                };
                limpiarSeleccion();
                agregarCeldaSeleccionada(seleccionInicio.fila, seleccionInicio.columna);
            }
            
            // Manejar continuaci√≥n de selecci√≥n
            function continuarSeleccion(e) {
                if (!seleccionando || intentoRealizado || juegoCompletado) return;
                
                const filaActual = parseInt(e.target.dataset.fila);
                const columnaActual = parseInt(e.target.dataset.columna);
                
                limpiarSeleccion();
                
                // Determinar direcci√≥n de selecci√≥n
                const difFila = filaActual - seleccionInicio.fila;
                const difColumna = columnaActual - seleccionInicio.columna;
                
                // Solo permitir selecci√≥n en l√≠nea recta
                if (difFila !== 0 && difColumna !== 0 && Math.abs(difFila) !== Math.abs(difColumna)) {
                    return;
                }
                
                const pasoFila = difFila === 0 ? 0 : difFila / Math.abs(difFila);
                const pasoColumna = difColumna === 0 ? 0 : difColumna / Math.abs(difColumna);
                
                // Agregar celdas en la direcci√≥n seleccionada
                let i = seleccionInicio.fila;
                let j = seleccionInicio.columna;
                
                while (true) {
                    agregarCeldaSeleccionada(i, j);
                    
                    if (i === filaActual && j === columnaActual) break;
                    
                    i += pasoFila;
                    j += pasoColumna;
                }
            }
            
            // Manejar final de selecci√≥n
            function finalizarSeleccion() {
                if (!seleccionando || intentoRealizado || juegoCompletado) return;
                
                seleccionando = false;
            }
            
            // Agregar celda a la selecci√≥n actual
            function agregarCeldaSeleccionada(fila, columna) {
                if (fila < 0 || fila >= gridSize || columna < 0 || columna >= gridSize) return;
                
                const index = fila * gridSize + columna;
                const celda = gridElement.children[index];
                
                if (!celda.classList.contains('selected')) {
                    celda.classList.add('selected');
                    celdasSeleccionadas.push({fila, columna});
                }
            }
            
            // Limpiar selecci√≥n actual
            function limpiarSeleccion() {
                celdasSeleccionadas.forEach(({fila, columna}) => {
                    const index = fila * gridSize + columna;
                    const celda = gridElement.children[index];
                    
                    // Solo quitar la clase si la celda no es parte de una palabra encontrada
                    if (!celda.classList.contains('found')) {
                        celda.classList.remove('selected');
                    }
                });
                
                celdasSeleccionadas = [];
            }
            
            // Verificar si la selecci√≥n forma una palabra v√°lida
            function verificarPalabra() {
                if (celdasSeleccionadas.length < 3) {
                    messageElement.textContent = "Selecciona al menos 3 letras";
                    messageElement.style.color = "#d32f2f";
                    return false;
                }
                
                // Obtener la palabra formada por las celdas seleccionadas
                let palabraSeleccionada = '';
                celdasSeleccionadas.forEach(({fila, columna}) => {
                    palabraSeleccionada += sopa[fila][columna];
                });
                
                // Verificar en ambos sentidos
                const palabraInvertida = palabraSeleccionada.split('').reverse().join('');
                
                let palabraValida = null;
                
                if (palabras.includes(palabraSeleccionada) && !palabrasEncontradas.includes(palabraSeleccionada)) {
                    palabraValida = palabraSeleccionada;
                } else if (palabras.includes(palabraInvertida) && !palabrasEncontradas.includes(palabraInvertida)) {
                    palabraValida = palabraInvertida;
                }
                
                if (palabraValida) {
                    // Marcar palabra como encontrada
                    palabrasEncontradas.push(palabraValida);
                    
                    // Marcar celdas como encontradas
                    celdasSeleccionadas.forEach(({fila, columna}) => {
                        const index = fila * gridSize + columna;
                        const celda = gridElement.children[index];
                        celda.classList.remove('selected');
                        celda.classList.add('found');
                    });
                    
                    // Marcar palabra en la lista
                    const palabraElement = document.getElementById(`word-${palabraValida.toLowerCase()}`);
                    if (palabraElement) {
                        palabraElement.classList.add('found');
                    }
                    
                    // Mostrar mensaje
                    messageElement.textContent = `¬°Correcto! Encontraste: ${palabraValida}`;
                    messageElement.style.color = "#2e7d32";
                    
                    // Verificar si todas las palabras fueron encontradas
                    if (palabrasEncontradas.length === palabras.length) {
                        juegoCompletado = true;
                        messageElement.textContent = "¬°Felicidades! Has encontrado todas las palabras.";
                        messageElement.classList.add("success-message");
                        attemptsInfoElement.textContent = "¬°Juego completado con √©xito!";
                        
                        // Mostrar modal de notificaci√≥n
                        setTimeout(() => {
                            modal.style.display = 'flex';
                        }, 2000);
                    }
                    
                    return true;
                } else {
                    messageElement.textContent = "Palabra no v√°lida. Intenta con otra selecci√≥n.";
                    messageElement.style.color = "#d32f2f";
                    return false;
                }
            }
            
            // Comprobar selecci√≥n actual
            checkButton.addEventListener('click', function() {
                if (intentoRealizado && !juegoCompletado) {
                    messageElement.textContent = "Ya realizaste tu intento. No puedes intentar m√°s.";
                    messageElement.style.color = "#d32f2f";
                    return;
                }
                
                if (juegoCompletado) {
                    messageElement.textContent = "Ya completaste el juego. ¬°Felicidades!";
                    messageElement.style.color = "#2e7d32";
                    return;
                }
                
                const resultado = verificarPalabra();
                if (resultado) {
                    // Si acert√≥, no cuenta como intento fallido
                    intentoRealizado = false;
                } else {
                    // Si fall√≥, marca que ya realiz√≥ el intento
                    intentoRealizado = true;
                    attemptsInfoElement.textContent = "Intentos restantes: 0";
                    messageElement.textContent = "No has acertado. Solo ten√≠as un intento.";
                    messageElement.style.color = "#d32f2f";
                }
            });
            
            // Reiniciar selecci√≥n actual
            resetButton.addEventListener('click', function() {
                if (!intentoRealizado && !juegoCompletado) {
                    limpiarSeleccion();
                    messageElement.textContent = "Selecci√≥n reiniciada. Busca una palabra.";
                    messageElement.style.color = "#4a4a4a";
                }
            });
            
            // WhatsApp notification
          whatsappBtn.addEventListener('click', function() {
    const message = "¬°He completado la Sopa de Letras de Helados!";
    // Abrir WhatsApp sin n√∫mero espec√≠fico (el usuario elegir√° el contacto)
    window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');
});
            
            // Screenshot instructions
            screenshotBtn.addEventListener('click', function() {
                alert("Para enviar una captura de pantalla:\n\n1. Toma una captura de pantalla de este puzle completado\n2. Guarda la imagen\n3. Env√≠ala por correo electr√≥nico o mensaje a la persona correspondiente");
            });
            
            // Cerrar modal
            closeModalBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Cerrar modal al hacer clic fuera del contenido
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Inicializar el juego
            inicializarSopa();
        });
    </script>
</body>

</html>
